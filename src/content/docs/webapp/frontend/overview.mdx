---
title: Frontend Architecture
description: Overview of the CTF FlagFrenzy frontend implementation
---

# Frontend Architecture

The CTF FlagFrenzy frontend is built using SvelteKit, in combination with Tailwind CSS.

## Technology Stack

- SvelteKit for UI
- TypeScript for type safety
- Tailwind CSS for styling
- Chart JS for the graph

## Folder Tree
Here you can see the folder tree of the flagfrenzy-sveltekit. These are only the files and folders that are important for the design of the frontend, so the overall folder tree is much bigger. The tailwind.config.js is where Tailwind can be customized. The postcss.config.js is important for the post apply of css parts. In the static folder are the favicon and images stored. The src folder is where all the html, css and svelte pages are stored. In the lib/components folder are all svelte pages which are only used in other pages like the Footer.svelte, which is used in the + layout.svelte.
```tree
│   DockerFile
│   .env
│   tailwind.config.js
│   postcss.config.js
├───static
│   │   favicon.png
│   └───images
└───src
    │   app.css
    │   app.html
    ├───lib
    │   └───components
    │       │   card.svelte
    │       │   Footer.svelte
    │       │   ...
    └───routes
        │   +error.svelte
        └───(protected)
            │   +layout.svelte
            │   +page.svelte
            ├───scoreboard
            │   │   +page.svelte
            └───...
```

## Layout.svelte
This page is a part of every page of the Webapp, mainly divided in 3 parts. The first part is the navigation, with the logo, the links and the dropdown menu. THe second part is the filler where the content of the other pages is load into and the last part is the Footer.svelte component which is load into.

### Functions
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| addUser | This is the function that saves the user data from Azure into the DB. | The function is only started if the getUser function does not get results |
| getUser | This is the function that loads the user data from the DB to use it in the frontend. | |
| togglemenu | This is the function that open the full screen menu overlay | Is only viewable on smaller screens |
| togglemenu2 | This is the function that open the dropdown menu. | The menu which appears under the avatar |

### Variables
This are the most important variables of the page.

| Variable | Description | Note |
|------------|------------|------------|
| currentPath | This is the variable which is used to show the current tab. | Shown through the underline |

## Index Page

The index page is the first page where the user lands after the login. The contents of the page are simple, starting with a image of a slogan and a welcoming text. Followed by a slider for the sponsors and as last the list of rules.

### Functions
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| nextSlide | This is the function for the buttons of the slider to switch between pages. | Number after the % to the number of slides |

### Variables
This are the most important variables of the page.

| Variable | Description | Note |
|------------|------------|------------|
| slides | This is the variable which stores all the information for the slider. | A slide needs a text, path to logo and background, link url |
| interval | The time interval for the change to the next slide. | Default is 10 seconds |

## Challenges Page
This is the page where all the challenges are displayed. A challenge is displayed in a card with the card.svelte component, there can be 4 per row. The card shows some information about the challenge like name, difficulty, part of the description and status. It acts as a button to open the popup (Modal.svelte), there everything about the challenge is displayed and the there is also the interaction menu. The interactions are start, submit, flag input, open challenge and flag history.

### Functions
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| loadChallenges | This is the function that loads all the challenges. | All sorted by category |
| loadUsermadeChallenges | This is the function that checks which challenges are solved or started. | |

### Variables
This are the most important variables of the page.

| Variable | Description | Note |
|------------|------------|------------|
| interval | The time interval for next refresh of the challenges data. | Default is 10 seconds |

### Functions card.svelte
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| openModal | This is the function that opens the popup (Modal.svelte) of the challenge. | |
| colorPicker | Chooses the color for the shadow and heading based on the difficulty. | |

### Functions Modal.svelte
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| setLocal | Saves the load data in a second variable. | Prevents return of the load simbole |
| loadHints | Loads the hints of the specific challenge. | Only the available ones |
| checkChainCondition | Checks if the user has done the previous challenge. | Some challenges are only doable if another one is done beforehand |
| startChallenge | Creates an entry in the DB for the start of the challenge. | Starts the deploy function |
| deploy | Sends a container deploy request for the challenge. | Creates the container for the whole team |
| submitChallenge | Updates the DB entry. | |
| submitButton | Validates the dinamyc flag and gives points if right. | |
| submit | Chooses chooses between static and dinamyc flag. | Chooses betweeen the followup functions submitButton and submitStatic |
| SubmitStatic | Validates the static flag and gives points if right. | |
| checkIfStarted | Checks if the URL for the container is in the DB. | |
| Flag_history | Loads all previous entered flaggs for a challenge. | Only wrong ones plus the penalty information |

### Variables
This are the most important variables of the page.

| Variable | Description | Note |
|------------|------------|------------|
| refreshInterval | The time interval for next refresh. | Default is 5 seconds |

## Scoreboard Page
This pages shows the graph and the Top 10 table. For the graph the graph.svelte component is load into the page. The graph.svelte uses chart.js to create the interactive graph. It is possible to hover over points in the graph and see the respectve values. Also it is possible the hide teams from the graph by clicking their name in the legend.

### Functions
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| loadTeams | This is the function that loads the data for the Top 10 table. | All sorted by points |
| loadGraphValue | This is the function that loads the daata for the graph.svelte. | List of point status for every 10 minutes per team |

### Variables
This are the most important variables of the page.

| Variable | Description | Note |
|------------|------------|------------|
| interval | The time interval for next refresh of the data. | Default is 1 minute |

### Functions graph.svelte
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| groupDatabyTeams | This is the function that groups the entrys per team. | |
| extractUniqueTimestamps | This is the function that alters the timestamp to match it for display on the webpage. | Only the hour and minutes are left behind |
| createDatasets | Combines the labels and data. | Followed by creation of the graph |

## Team Page
This is the page where all teams are shown. The page is started with the heading, followed by a searchbar. By entering in the searchbar the below list off all teams is filtered for the matches with the input. To easily find the own team in the list it is dislayed in a brighter color. Next to the searchbar is a create team button which open the TeamCreateModal.svelte . Every entry in the list is at the same time a button to open the TeamModal.svelte . This popup showes more information about a team, like the members and who the leader is. Below this information is the interaction menu, containing the join, leave or delete button. These are as long visible as the event is not started or the team is already full.

### Functions
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| loadTeams | This is the function that loads all teams. | |
| loadTeamMember | This is the function that loads the own team members. | |

### Functions CreateTeamModal.svelte
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| addTeam | This is the function that creates the new team. | Starts the join team afterwards |
| joinTeam | This is the function that joins the user to a team. | |

### Functions TeamModal.svelte
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| joinTeam | This is the function that joins the user to a team. | To join a team if not full or already in a team |
| deleteTeam | This is the function that deletes a whole team. | Only be done by leader |
| leaveTeam | This is the function to leave a team. | Ony be done by member not leader |
| checkExpiration | This is the function that checks if the event has started. | Deactivates things like team join, delete or leave |

### Variables TeamModal.svelte
This are the most important variables of the page.

| Variable | Description | Note |
|------------|------------|------------|
| deadline | Contain the data where the event starts. | |

## Profile Page
This is the page where the user information is displayed. The page uses mainly svg to create the ellipse in the middle, in which the user avatar is placed and arounf it the team place, the team name and team points are displayed. Around the ellipse there is the username, class, email and nickname. The pages allows it to only change the avatar or the nickname. Eith the change of the avatar the shadow might also change, because it is connected to it.

### Functions
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| updateUser | This is the function that updates the user data in the db. | Only nickname and avatar |
| selectAvatar | This is the function that provides the slider functionality for the avatar slider. | |
| getShadowFilter | This is the function that provides the shadow for the respective avatar. |
| getAvatarColor | This is the function that provides the color for the respective avatar. | |
| splitText | This is the function that splits the teamname to make sure there is no overflow. | |

### Variables
This are the most important variables of the page.

| Variable | Description | Note |
|------------|------------|------------|
| avatars | Contain the paths for every avatar which is chooseable. | |

## About Us Page
This is the page where the project team is presented. It starts with a group picture of all, which is followed by the management section containing the text of the project supervisor and the project leader and their images. After this there are two sections for each team, each with a slider. A slide contains the information about one team member.

### Functions
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| nextSlide1 / nextSlide2 | Functions to switch between the slides | Number after the % to the number of slides |

### Variables
This are the most important variables of the page.

| Variable | Description | Note |
|------------|------------|------------|
| slides1 / slides2 | Contain the data for every slide. | Default is 1 minute |
| interval1 / interval2 | The time until the slider turn to next slide. | Default is 10 seconds |

## Admin Page
This page is only accessible for the members who are part of the adminUser array, which is located in the same folder as this page but in the +page.server.js . The page starts with a more detailed version of the grpah of the scoreboard, followed by a list of solved challenges, a list of shared flags and at last the list of running challenges with the option to deprovision them.

### Functions
This are the most important functions of the page.

| Function | Description | Note |
|------------|------------|------------|
| loadAllFlags | Loads every flag from the anti-cheat |  |
| loadNotSolved | Loads all start challenge entrys which are not solved. |  |
| deprovision | Deprovisions the spefic container. | By clicking the button of the entry in running challenge list |
| loadGraphValue | Loads the data for the graph. | Moves the gathered data forward to the graph.svelte |
| checkAdmin | Checks if the user is part of the adminUser array. |  |

### Variables
This are the most important variables of the page.

| Variable | Description | Note |
|------------|------------|------------|
| interval | The time until the data is automatically refreshed. | Default is 1 minute |

## Error Page
Prints out the error and the status code. It also hides that there is a admin page incase somebody tries to enter the page but is not allowed.